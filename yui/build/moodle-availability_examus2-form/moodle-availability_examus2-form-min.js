YUI.add("moodle-availability_examus2-form",function(te,e){M.availability_examus2=M.availability_examus2||{},M.availability_examus2.form=te.Object(M.core_availability.plugin),M.availability_examus2.form.rules=null,M.availability_examus2.form.initInner=function(e,i,a,n){this.rules=e,this.warnings=i,this.scoring=a,this.defaults=n},M.availability_examus2.form.instId=0,M.availability_examus2.form.getNode=function(e){var i,t,a,n,l,o,s,r,d,u,c,m,p,b,f,h,v,g,y,_,k,w,x,C,q,N,T,E,I,L,R,A,S,V,D,F,O,j,H,$,z,B,U,Y,G,J,K,P,Q,W,X;function Z(e,i){return i=i||"availability_examus2",M.util.get_string(e,i)}function ee(e){var i=Z("showmore","core_form"),a=Z("showless","core_form");return'<a href="#" class="examus2-moreless" data-more="'+i+'" data-less="'+a+'">'+i+'</a><div class="hidden col-md-12">'+e+"</div>"}function ie(e,i,a,n){var t=n?10:5,l=n?10:7;return'<span class="availability-group form-group mb-2"><div class="col-md-'+t+' col-form-label d-flex pb-0 pr-md-0">  <label for="'+e+'">'+i+'</label></div><div class="col-md-'+l+' form-inline align-items-start felement">'+a+"</div></span>"}function ae(e){setTimeout(e,0)}function ne(e){1==e?(x.addClass("btn-primary"),x.removeClass("btn-secondary"),C.addClass("btn-secondary"),C.removeClass("btn-primary"),q.removeClass("hidden"),N.addClass("hidden")):(C.addClass("btn-primary"),C.removeClass("btn-secondary"),x.addClass("btn-secondary"),x.removeClass("btn-primary"),q.addClass("hidden"),N.removeClass("hidden"))}for(E in M.availability_examus2.form.instId+=1,o=(n="examus2"+M.availability_examus2.form.instId)+"_mode",s=n+"_schedulingRequired",r=n+"_autoRescheduling",d=n+"_isTrial",u=n+"_identification",c=n+"_customRules",m=n+"_auxCamera",p=n+"_allowmultipledisplays",b=n+"_allowvirtualenvironment",f=n+"_checkidphotoquality",h=n+"_ldb",v=n+"_biometryEnabled",g=n+"_biometrySkipfail",y=n+"_biometryFlow",_=n+"_biometryTheme",k=n+"_userAgreement",w=n+"_webCameraMainView",i=ie(l=n+"_duration",Z("duration"),'<input type="text" name="duration" id="'+l+'" class="form-control">'),i+=ie(o,Z("proctoring_mode"),'<select name="mode" id="'+o+'" class="custom-select">  <option value="online">'+Z("online_mode")+'</option>  <option value="identification">'+Z("identification_mode")+'</option>  <option value="offline">'+Z("offline_mode")+'</option>  <option value="auto">'+Z("auto_mode")+"</option></select>"),i+=ie(u,Z("identification"),'<select name="identification" id="'+u+'" class="custom-select">  <option value="passport">'+Z("passport_identification")+'</option>  <option value="face">'+Z("face_identification")+'</option>  <option value="face_and_passport">'+Z("face_passport_identification")+'</option>  <option value="skip">'+Z("skip_identification")+"</option></select>"),i+=ie(w,Z("web_camera_main_view"),'<select name="webcameramainview" id="'+w+'" class="custom-select">  <option value="front">'+Z("web_camera_main_view_front")+'</option>  <option value="side">'+Z("web_camera_main_view_side")+"</option></select>"),i+=ie(s,Z("scheduling_required"),'<input type="checkbox" name="scheduling_required" id="'+s+'" value="1">&nbsp;<label for="'+s+'">'+Z("enable")+"</label> "),i+=ie(r,Z("auto_rescheduling"),'<input type="checkbox" name="auto_rescheduling" id="'+r+'" value="1">&nbsp;<label for="'+r+'">'+Z("enable")+"</label> "),i+=ie(d,Z("is_trial"),'<input type="checkbox" name="istrial" id="'+d+'" value="1">&nbsp;<label for="'+d+'">'+Z("enable")+"</label> "),i+=ie(m,Z("auxiliary_camera"),'<input type="checkbox" name="auxiliarycamera" id="'+m+'" value="1">&nbsp;<label for="'+m+'">'+Z("enable")+"</label> "),i+=ie(h,Z("enable_ldb"),'<input type="checkbox" name="ldb" id="'+h+'" value="1">&nbsp;<label for="'+h+'">'+Z("enable")+"</label> "),i+=ie(p,Z("allowmultipledisplays"),'<input type="checkbox" name="allowmultipledisplays" id="'+p+'" value="1">&nbsp;<label for="'+p+'">'+Z("enable")+"</label> "),i+=ie(b,Z("allowvirtualenvironment"),'<input type="checkbox" name="allowvirtualenvironment" id="'+b+'" value="1">&nbsp;<label for="'+b+'">'+Z("enable")+"</label> "),i+=ie(f,Z("checkidphotoquality"),'<input type="checkbox" name="checkidphotoquality" id="'+f+'" value="1">&nbsp;<label for="'+f+'">'+Z("enable")+"</label> "),i+=ie(k,Z("user_agreement_url"),'<input name="useragreementurl" id="'+k+'" class="form-control" value="" />'),i+=ie(c,Z("custom_rules"),'<textarea name="customrules" id="'+c+'" style="width: 100%" class="form-control"></textarea>'),T="",this.rules)T+='<br><input type="checkbox" name="'+E+'" id="'+(I=n+"_"+E)+'" value="'+E+'" >&nbsp;',T+='<label for="'+I+'" style="white-space: break-spaces">'+Z(E)+"</label>";for(R in i+=ie(null,Z("rules"),'<div class="rules" style="white-space:nowrap">'+T+"</div>"),L="",this.warnings)L+='<input type="checkbox" name="'+R+'" id="'+(A=n+"_"+R)+'" value="'+R+'" >&nbsp;',L+='<label for="'+A+'" style="white-space: break-spaces">'+Z(R)+"</label><br>";for(V in S="",this.scoring)F='<input type="number" class="examus2-scoring-input" value=""step="0.01" name="'+V+'"id="scoring_'+(D=n+"_"+V)+'"min="'+this.scoring[V].min+'" max="'+this.scoring[V].max+'">',S+=ie(D,Z("scoring_"+V),F);if(O="",O+=ie(v,Z("biometry_enabled"),'<input type="checkbox" name="biometryenabled" id="'+v+'" value="1">&nbsp;<label for="'+v+'">'+Z("enable")+"</label> "),O+=ie(g,Z("biometry_skipfail"),'<input type="checkbox" name="biometryskipfail" id="'+g+'" value="1">&nbsp;<label for="'+g+'">'+Z("enable")+"</label> "),O+=ie(y,Z("biometry_flow"),'<input type="text" name="biometryflow" id="'+y+'" class="form-control">'),O+=ie(_,Z("biometry_theme"),'<input type="text" name="biometrytheme" id="'+_+'" class="form-control">'),j="",j+=ie(null,Z("visible_warnings"),'<div class="warnings" style="white-space: nowrap" >'+ee(L)+"</div>",!0),j+=ie(null,Z("scoring_params_header"),ee(S),!0),j+=ie(null,Z("biometry_header"),ee(O),!0),(t=te.Node.create('<span class="availability_examus2-tabs" style="position:relative"></span>')).setHTML("<label><strong>"+Z("title")+"</strong></label><br><br>"),H=te.Node.create(
'<div style="position:absolute; top: 0; right: 0;" class="availability_examus2-tab-btns"></div>').appendTo(t),x=te.Node.create('<a href="#" class="btn btn-primary">1</a>').appendTo(H),C=te.Node.create('<a href="#" class="btn btn-secondary">2</a>').appendTo(H),q=te.Node.create('<div class="tab_content">'+i+"</div>").appendTo(t),N=te.Node.create('<div class="tab_content hidden">'+j+"</div>").appendTo(t),e.rules===undefined&&(e.rules=this.rules),e.warnings===undefined&&(e.warnings=this.warnings),e.scoring=e.scoring||{},e.creating){for($ in this.defaults)if(z=this.defaults[$],"scoring"==$)for(B in z)e.scoring[B]=z[B]?parseFloat(z[B]):null;else if("rules"==$)for(U in z)e.rules[U]=z[U];else if("warnings"==$)for(Y in z)e.warnings[Y]=!!z[Y];else e[$]=z;e.mode||(e.mode="online",e.scheduling_required=!0)}for(G in e.duration!==undefined&&t.one("input[name=duration]").set("value",e.duration),e.mode!==undefined&&t.one("select[name=mode] option[value="+e.mode+"]").set("selected","selected"),e.identification!==undefined&&t.one("select[name=identification] option[value="+e.identification+"]").set("selected","selected"),e.webcameramainview&&t.one("select[name=webcameramainview] option[value="+e.webcameramainview+"]").set("selected","selected"),e.auto_rescheduling!==undefined&&t.one("#"+r).set("checked",e.auto_rescheduling?"checked":null),e.istrial!==undefined&&(a=e.istrial?"checked":null,t.one("#"+d).set("checked",a)),e.auxiliarycamera!==undefined&&t.one("#"+m).set("checked",e.auxiliarycamera?"checked":null),e.ldb!==undefined&&t.one("#"+h).set("checked",e.ldb?"checked":null),e.scheduling_required!==undefined&&t.one("#"+s).set("checked",e.scheduling_required?"checked":null),e.allowmultipledisplays!==undefined&&t.one("#"+p).set("checked",e.allowmultipledisplays?"checked":null),e.allowvirtualenvironment!==undefined&&t.one("#"+b).set("checked",e.allowvirtualenvironment?"checked":null),e.checkidphotoquality!==undefined&&t.one("#"+f).set("checked",e.checkidphotoquality?"checked":null),e.biometryenabled!==undefined&&t.one("#"+v).set("checked",e.biometryenabled?"checked":null),e.biometryskipfail!==undefined&&t.one("#"+g).set("checked",e.biometryskipfail?"checked":null),e.biometryflow!==undefined&&t.one("#"+y).set("value",e.biometryflow),e.biometrytheme!==undefined&&t.one("#"+_).set("value",e.biometrytheme),this.warnings)e.warnings[G]===undefined&&(e.warnings[G]=this.warnings[G]);for(J in e.warnings)e.warnings[J]&&(K=t.one(".warnings input[name="+J+"]"))&&K.set("checked","checked");for(P in e.rules)e.rules[P]&&(Q=t.one(".rules input[name="+P+"]"))&&Q.set("checked","checked");for(W in e.scoring)isNaN(e.scoring[W])||(X=t.one(".examus2-scoring-input[name="+W+"]"))&&X.set("value",e.scoring[W]);return e.customrules!==undefined&&t.one("#"+c).set("value",e.customrules),e.useragreementurl!==undefined&&t.one("#"+k).set("value",e.useragreementurl),t.delegate("valuechange",function(){ae(function(){M.core_availability.form.update()})},"input,textarea,select"),t.delegate("click",function(){ae(function(){M.core_availability.form.update()})},"input[type=checkbox]"),t.delegate("valuechange",function(){!function n(){var e=["normal","identification"],i=t.one("select[name=mode]").get("value").trim(),a=0<=e.indexOf(i);t.one("#"+s).set("checked",a)}()},"#"+o),x.on("click",function(e){e.preventDefault(),ne(1)}),C.on("click",function(e){e.preventDefault(),ne(2)}),t.delegate("click",function(e){e.preventDefault(),function n(e){var i=e.next(),a=i.hasClass("hidden");a?(i.removeClass("hidden"),e.setContent(e.getAttribute("data-less"))):(i.addClass("hidden"),e.setContent(e.getAttribute("data-more")))}(e.target)},".examus2-moreless"),t},M.availability_examus2.form.fillValue=function(a,e){var i,n,t,l;a.duration=e.one("input[name=duration]").get("value").trim(),a.mode=e.one("select[name=mode]").get("value").trim(),a.identification=e.one("select[name=identification]").get("value").trim(),a.webcameramainview=e.one("select[name=webcameramainview]").get("value").trim(),a.auto_rescheduling=e.one("input[name=auto_rescheduling]").get("checked"),a.scheduling_required=e.one("input[name=scheduling_required]").get("checked"),a.istrial=e.one("input[name=istrial]").get("checked"),a.customrules=e.one("textarea[name=customrules]").get("value").trim(),a.useragreementurl=e.one("input[name=useragreementurl]").get("value").trim(),a.auxiliarycamera=e.one("input[name=auxiliarycamera]").get("checked"),a.ldb=e.one("input[name=ldb]").get("checked"),a.allowmultipledisplays=e.one("input[name=allowmultipledisplays]").get("checked"),a.allowvirtualenvironment=e.one("input[name=allowvirtualenvironment]").get("checked"),a.checkidphotoquality=e.one("input[name=checkidphotoquality]").get("checked"),a.biometryenabled=e.one("input[name=biometryenabled]").get("checked"),a.biometryskipfail=e.one("input[name=biometryskipfail]").get("checked"),a.biometryflow=e.one("input[name=biometryflow]").get("value").trim(),a.biometrytheme=e.one("input[name=biometrytheme]").get("value").trim(),a.rules={},i=e.all(".rules input"),te.each(i,function(e){l=e.get("value"),!0===e.get("checked")?a.rules[l]=!0:a.rules[l]=!1}),a.warnings={},n=e.all(".warnings input"),te.each(n,function(e){l=e.get("value"),!0===e.get("checked")?a.warnings[l]=!0:a.warnings[l]=!1}),a.scoring={},t=e.all(".examus2-scoring-input"),te.each(t,function(e){l=e.get("name");var i=e.get("value").trim();0<i.length?a.scoring[l]=parseFloat(i):a.scoring[l]=null})},M.availability_examus2.form.fillErrors=function(e,i){var a,n,t,l={};this.fillValue(l,i),a=document.getElementById("duration_error"),l.duration!==undefined&&new RegExp("^\\d+$").test(l.duration)&&l.duration%30==0||a?l.duration!==undefined&&new RegExp("^\\d+$").test(l.duration)&&l.duration%30==0&&a&&a.remove():(n=i._node.querySelector('input[name="duration"]').parentNode.parentNode,(t=document.createElement("span")).style.color="red",t.style.fontSize="11px",t.innerHTML=M.util.get_string("error_setduration","availability_examus2"),t.classList.add("col-md-10"),t.classList.add(
"col-form-label"),t.classList.add("d-flex"),t.classList.add("mb-1"),t.classList.add("pt-0"),t.id="duration_error",n.insertAdjacentElement("afterend",t))}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});